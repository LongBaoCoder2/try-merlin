version: "3.8"
services:
  merlin-tensorflow-cpu:
    image: nvcr.io/nvidia/merlin/merlin-tensorflow:23.12
    ports:
      - "8888:8888" # Jupyter Lab
      - "8797:8787" # Dask Scheduler
      - "8796:8786" # Dask Workers
    ipc: host
    cap_add:
      - SYS_NICE
    environment:
      - NVIDIA_VISIBLE_DEVICES=""
      - NVIDIA_DRIVER_CAPABILITIES=""
    volumes:
      - ./data:/try-merlin/data
      - ./src:/try-merlin/src
    command: >
      bash -c "cd / && jupyter-lab --allow-root --ip='0.0.0.0' --NotebookApp.token=''"
